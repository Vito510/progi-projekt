
```mermaid
classDiagram
    class Renderer{
        -gpu: WebGLManager
        -camera: Camera
        +constructor(canvas, params)
        +update()
        +render()
        +destroy()
        +setQuality()
        +getPoint(coordinates)
        +setPoints(points)
    }
    class WebGLManager{
        -canvas: HTMLCanvasElement
        -vertex_buffer: WebGLBuffer
        -vertex_location: number
        -uniform_buffer: WebGLBuffer
        -program: WebGLProgram
        -base_render_size: Object
        -height_texture: Texture
        -path_texture: Texture
        +uniforms: Object
        +initialize(canvas, params)
        +constructor(canvas, fragment_shader_code, params)
        +destroy()
        +render()
        +synchronize()
    }
    class Texture {
        -data: UInt8ClampedArray
        -width: number
        -height: number
        -texture: number
        -binding: number
        -location: number
        +constructor(data, width, height)
        +load(url)
        +destroy(gl)
        +setup(gl, name, program, binding, filter, wrap_mode)
        +bind(gl)
        +store(gl, data)
    }
    class Camera{
        +position: Vector3D
        +rotation: Vector2D
        +fov: number
        +speed: number
        +sensitivity: number
        +free_mode: boolean
        +orbit_mode: boolean
        +orbit_anchor: Vector3D
        +enabled: boolean
        -key_states: Object
        +constructor()
        +getRotationMatrix()
        +getLocalDirection()
        +update()
        +updatePosition(local_direction)
        +updateRotation(dh, dv)
        +updateOrbit(dh, dv, dz)
    }
    class Matrix{
        +value: number[][]
        +constructor(array)
        +array()
        +data()
        +static rotationMatrix(axis, rad)
        +static translationMatrix(axis, rad)
        +static rotate(mat, rad, axis)
        +static mul(a, b)
        +static deg2rad(deg)
        +static rad2deg(rad)
        +static rot2dir(horizontal, vertical)
    }
    class Vector {
        <<abstract>>
        +array()
        +data()
        +static dot(a, b)
        +len()
    }
    class Vector2D {
        +x: number
        +y: number
        +constructor(x, y)
        +copy()
        +norm()
        +floor()
        +sign()
        +static mix(a, b, factor)
        +static add(...args)
        +static sub(a, ...b)
        +static mul(a, b)
        +static div(a, b)
    }
    class Vector3D {
        +x: number
        +y: number
        +z: number
        +constructor(x, y)
        +copy()
        +norm()
        +floor()
        +sign()
        +static mix(a, b, factor)
        +static add(...args)
        +static sub(a, ...b)
        +static mul(a, b)
        +static div(a, b)
        +xy()
        +static cross(a, b)
    }
    class Vector4D {
        +x: number
        +y: number
        +z: number
        +w: number
        +constructor(x, y)
        +copy()
        +norm()
        +floor()
        +sign()
        +static mix(a, b, factor)
        +static add(...args)
        +static sub(a, ...b)
        +static mul(a, b)
        +static div(a, b)
        +xyz()
        +xy()
    }
    class WebGLUtils{
        <<utility>>
        +static compileShader(gl, shader_code, type)
        +static linkProgram(gl, vertex_shader, fragment_shader)
        +static createProgram(gl, vertex_shader_code, fragment_shader_code)
        +static setFeedbaclVaryings(gl, program, varyings, mode)
        +static createTexture(gl, width, height, format, filter, wrap_mode, data)
        +static textureToImage(gl, texture, width, height)
    }
    class TileUtils{
        <<utility>>
        +static elevation_offset: number
        +static tile_resolution: number
        +static display_resolution: number
        +static pixel_size: number
        +static max_tiles: number
        +static isValidSelection(selection)
        +static getTileCount(selection)
        +static encodeHeight(height)
        +static decodeHeight(pixel)
        -static getUrl(longitude, latitude)
        -static fetchTile(longitude, latitude)
        -static getTileSet(selection)
        -static combineTiles(tiles)
        -static cropToSelection(image, selection)
        +static getParams(image, scale)
        +static getData(selection)
    }
    class ImageUtils {
        <<utility>>
        -static canvas: OffscreenCanvas
        -static context: OffscreenCanvasRenderingContext2D
        +static get(image, x, y)
        +static set(image, x, y, value)
        +static iterate(image, setter)
        +static resize(image, width, height, interpolation)
        +static crop(image, x, y, width, height)
        +static stitch(image[], axis)
        +static load(url)
        +static save(image, name)
    }
    class RayCast {
        <<utility>>
        +static rayCast(heightmap, coordinates, uniforms)
        -static traverse(heightmap, uniforms, origin, direction)
        -static intersect(origin, direction, aabb_min, aabb_max)
        -static getHeight(heightmap, uniforms, position)
    }
    class PathMap {
        <<utility>>
        -static canvas: OffscreenCanvas
        -static context: OffscreenCanvasRenderingContext2D
        +static generatePathmap(points, width, height)
        -static drawPoints(points, radius, color)
        -static drawLines(points, thickness, color)
        -static drawCircle(radius, x, y, color)
        -static fillCanvas(color)
    }
    class TrackPoint {
        <<type>>
        +x: number
        +y: number
        +z: number
    }
    class Pixel{
        <<type>>
        +r: number
        +g: number
        +b: number
        +a: number
    }

    Renderer *-- WebGLManager
    Renderer o.. Camera
    
    TileUtils ..> ImageUtils
    TileUtils ..> Pixel
    ImageUtils ..> Pixel

    Camera o.. Vector2D
    Camera o.. Vector3D
    Camera o.. Matrix

    WebGLManager o.. Texture
    Texture ..> WebGLUtils
    WebGLManager ..> WebGLUtils

    Renderer ..> PathMap
    Renderer ..> RayCast
    PathMap ..> TrackPoint
    RayCast ..> Vector2D
    RayCast ..> Vector3D
    RayCast ..> Vector4D
    RayCast ..> Matrix
    RayCast ..> ImageUtils
    
    Vector <|-- Vector2D
    Vector <|-- Vector3D
    Vector <|-- Vector4D
    Matrix ..> Vector4D
    Matrix ..> Vector3D
```